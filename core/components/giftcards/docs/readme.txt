--------------------
giftCards
--------------------
Version: 1.2beta1
Author: Andchir <andchir@gmail.com>
--------------------

Студия "Симпл Дрим" - http://www.simpledream.ru/

--------------------

based on modExtra (Shaun McCormick <shaun+modextra@modx.com>).

--------------------

Подарочные карты и скидки интернет магазина.
Создание кодов карт и сниппет для ввода кода на сайте.
Управление скидками.
Для Shopkeeper 3.x MODX Revolution.

--------------------

Сниппет giftCards - выводит форму для ввода кода подарочной карты.

[[!giftCards?
&tpl=`giftCards_form`
&max_attempts=`10`
]]

max_attempts - максимальное число попыток ввода кода карты. Если предел превышен, следующую попытку можно сделать через 10 минут.

--------------------

Сниппет userDiscount - выводит размер скидки пользователя.

[[!userDiscount]]

Параметр "user_id" - ID пользователя. По умолчанию текущий ($modx->user).

--------------------

Плагин giftCards - пересчитывает общую цену заказа с учётом подарочной карты (если введён код).
При отправке заказа ставит заметку с номером и номиналом карты.
При смене статуса заказа на "Выполнен" обновляет статистику для пользователя.
Проверяет достигнута ли сумма покупок, которая даёт право на скидку и переводит пользователя в соответствующую группу.

Когда применена скидка в корзине (cartRowTpl) доступен плейсхолдер [[+shk_oldprice]] - старая цена без скидки.

--------------------

Скидки назначаются группам пользователей. В компоненте можно указать сумму покупок, при которой пользователь автоматически переведётся в соответствующую группу и получит скидку.

